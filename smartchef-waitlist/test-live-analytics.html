<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vercel Analytics Live Test</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #0a0a0a;
            color: #ffffff;
        }
        .test-section {
            background: #1a1a1a;
            border: 1px solid #333;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        .success { color: #10b981; }
        .warning { color: #f59e0b; }
        .error { color: #ef4444; }
        .info { color: #3b82f6; }
        button {
            background: #7c3aed;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #6d28d9;
        }
        #results {
            background: #111;
            border: 1px solid #333;
            border-radius: 6px;
            padding: 15px;
            margin: 10px 0;
            font-family: monospace;
            font-size: 14px;
            white-space: pre-wrap;
        }
    </style>
</head>
<body>
    <h1>üîç Vercel Analytics Live Test</h1>
    <p>This tool tests if Vercel Analytics is working on your live site: <strong>https://smartchef-tau.vercel.app/</strong></p>
    
    <div class="test-section">
        <h2>üìä Analytics Detection Test</h2>
        <p>Click the button below to test if analytics requests are being made:</p>
        <button onclick="testAnalytics()">Test Analytics</button>
        <button onclick="clearResults()">Clear Results</button>
        <div id="results"></div>
    </div>

    <div class="test-section">
        <h2>üîß Manual Testing Instructions</h2>
        <ol>
            <li><strong>Open your live site:</strong> <a href="https://smartchef-tau.vercel.app/" target="_blank" style="color: #7c3aed;">https://smartchef-tau.vercel.app/</a></li>
            <li><strong>Open Browser DevTools:</strong> Press F12 or right-click ‚Üí Inspect</li>
            <li><strong>Go to Network Tab:</strong> Look for the Network panel</li>
            <li><strong>Filter by "vercel":</strong> Type "vercel" in the filter box</li>
            <li><strong>Perform actions:</strong> Navigate around, click buttons, submit forms</li>
            <li><strong>Look for requests to:</strong>
                <ul>
                    <li><code>vitals.vercel-analytics.com</code> (Analytics)</li>
                    <li><code>vitals.vercel-insights.com</code> (Speed Insights)</li>
                </ul>
            </li>
        </ol>
    </div>

    <div class="test-section">
        <h2>üéØ Common Issues & Solutions</h2>
        
        <h3 class="warning">‚ö†Ô∏è Issue 1: No Analytics Data in Dashboard</h3>
        <ul>
            <li><strong>Wait Time:</strong> Analytics data can take 5-10 minutes to appear</li>
            <li><strong>Real Users Only:</strong> Analytics only tracks real user visits, not bot traffic</li>
            <li><strong>Vercel Deployment:</strong> Must be deployed to Vercel (not localhost)</li>
        </ul>

        <h3 class="warning">‚ö†Ô∏è Issue 2: Project Not Linked</h3>
        <ul>
            <li>Check if your GitHub repo is properly linked to Vercel project</li>
            <li>Verify the project name matches: "smartchef"</li>
            <li>Ensure you're logged into the correct Vercel account</li>
        </ul>

        <h3 class="warning">‚ö†Ô∏è Issue 3: Code Issues</h3>
        <ul>
            <li>Analytics component must be in the root layout</li>
            <li>Import: <code>import { Analytics } from '@vercel/analytics/react';</code></li>
            <li>Usage: <code>&lt;Analytics /&gt;</code> in the body</li>
        </ul>
    </div>

    <div class="test-section">
        <h2>‚úÖ Verification Checklist</h2>
        <div id="checklist">
            <label><input type="checkbox"> Site is deployed to Vercel</label><br>
            <label><input type="checkbox"> Analytics package is installed (@vercel/analytics)</label><br>
            <label><input type="checkbox"> Analytics component is in layout.tsx</label><br>
            <label><input type="checkbox"> No JavaScript errors in console</label><br>
            <label><input type="checkbox"> Network requests to vercel-analytics.com visible</label><br>
            <label><input type="checkbox"> Waited at least 10 minutes for data</label><br>
            <label><input type="checkbox"> Checked correct Vercel project dashboard</label><br>
        </div>
    </div>

    <script>
        function log(message, type = 'info') {
            const results = document.getElementById('results');
            const timestamp = new Date().toLocaleTimeString();
            const colors = {
                success: '#10b981',
                warning: '#f59e0b', 
                error: '#ef4444',
                info: '#3b82f6'
            };
            
            results.innerHTML += `<span style="color: ${colors[type]}">[${timestamp}] ${message}</span>\n`;
            results.scrollTop = results.scrollHeight;
        }

        function clearResults() {
            document.getElementById('results').innerHTML = '';
        }

        async function testAnalytics() {
            log('üîç Starting Vercel Analytics test...', 'info');
            
            // Test 1: Check if we can reach the site
            try {
                log('üì° Testing site connectivity...', 'info');
                const response = await fetch('https://smartchef-tau.vercel.app/', { 
                    method: 'HEAD',
                    mode: 'no-cors'
                });
                log('‚úÖ Site is reachable', 'success');
            } catch (error) {
                log('‚ùå Site connectivity issue: ' + error.message, 'error');
            }

            // Test 2: Check current page for analytics
            log('üîç Checking current page for analytics scripts...', 'info');
            
            const scripts = document.querySelectorAll('script');
            let foundAnalytics = false;
            
            scripts.forEach(script => {
                if (script.src && script.src.includes('vercel')) {
                    log('‚úÖ Found Vercel script: ' + script.src, 'success');
                    foundAnalytics = true;
                }
            });
            
            if (!foundAnalytics) {
                log('‚ö†Ô∏è No Vercel analytics scripts found on this test page', 'warning');
                log('üí° This is expected - test your actual site instead', 'info');
            }

            // Test 3: Provide debugging info
            log('üìä Environment Info:', 'info');
            log('- User Agent: ' + navigator.userAgent.substring(0, 50) + '...', 'info');
            log('- Referrer: ' + (document.referrer || 'Direct visit'), 'info');
            log('- URL: ' + window.location.href, 'info');
            
            log('üéØ Next Steps:', 'info');
            log('1. Visit your live site: https://smartchef-tau.vercel.app/', 'info');
            log('2. Open DevTools Network tab', 'info');
            log('3. Look for requests to vitals.vercel-analytics.com', 'info');
            log('4. Check Vercel dashboard after 10 minutes', 'info');
        }

        // Auto-run basic checks on page load
        window.addEventListener('load', () => {
            log('üöÄ Analytics test page loaded', 'success');
            log('üí° Click "Test Analytics" button to run diagnostics', 'info');
        });
    </script>
</body>
</html>